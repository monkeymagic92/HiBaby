<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/header.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="main-container">
       <header class="main-header">
            <ul class="header-ul">
                <li><a class="li-a1" href="/index/select"><span id="li1">HiBaby</span></a></li>
                <li><a class="li-a2-1" href="#"><span id="li2-1" onclick="showFrList()">친구 목록</span></a></li>
                <li><a class="li-a2" href="#"><span id="li2" onclick="showUserList()">유저목록</span></a></li>
                <li>
                    <span id="li3">쪽지함</span> 
                    <!-- span으로 쪽지함 ! 나타나게 하기 -->
                </li>
                <li>
                    <div class="dropdown">
                        <button class="dropbtn">
                            <c:if test="${loginUser.profile_img != null}">
                        		<img class="drop-img" src="/res/img/HiBaby/profile_img/user/${loginUser.i_user }/${loginUser.profile_img}" class="profileImg">
                        	</c:if>
                        	<c:if test="${loginUser.profile_img == null}">
                        		<img class="drop-img" src="/res/img/HiBaby.jpg" class="profileImg">
                        	</c:if>
                        </button>
                        <div class="dropdown-content">
                          <a href="/user/myPage">마이페이지</a>
                          <div class="hrDiv">
                              <hr>
                          </div>
                          <a href="#" onclick="logOut()">로그아웃</a>
                        </div>
                    </div>
                </li>
            </ul>
       </header>
       <button id="testBtn" onclick="showDetailModal()">openTestDetailModal</button>

       <!-- 유저검색 모달 start -->
       <div id="searchBox" class="modal">
            <!-- Modal content -->
            
            <div class="modal-content">                
                <span id="exitBtn" class="material-icons" onclick="searchBoxHide()">clear</span>
                <div>
                    <form id="searchNickFrm">
                        <input id="searchNick" type="text" name="searchNick" placeholder="유저 검색">
                        <div class="searchBtnDiv">
                            <span id="userSearchBtn" class="material-icons" onclick="searchUserList()">
                                person_search
                            </span>
                        </div>
                    </form>
                    <button type="button" id="allUserBtn" onclick="allUserBtn()">전체 유저 보기</button>
                </div>
                
                <!-- Modal body -->
                <button id="testBtn" onclick="showDetailModal()">openTestDetailModal</button>
                <div class="frmodal-body">
                    <div class="userListTable">
                        <div id="userListBox">
                            <!-- 계급, 사진, 닉네임, 상태메세지( 20글자이상 ...으로 ) 스크롤 기능 넣기-->
                            <div class="userListDiv1"><img class="userListImg" src="img/chall.png"></div>
                            <div class="userListDiv2"><img class="userListImg" src="img/HiBaby.jpg"></div>
                            <div class="userListDiv3">Test321</div>
                            <div class="userListDiv4">저의 상태메세지 입니다 말은점으로...</div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal bottom -->

            </div>
        </div>
        <!-- 유저검색 모달 end -->
        

        <!-- 유저검색 상세모달 start -->
        <div id="detailUser" class="detailModal">

            <!-- Modal content -->
            <div class="detailModal-content">                
                <span id="detailExitBtn" class="material-icons" onclick="detailModalHide()">clear</span>
                <!-- detailUserBox 안에 append 하기 -->
                <div id="detailUserBox">

                    <img class="detailImg1" src="img/chall.png">
                    <div class="detailUserInfo">
                        <img class="detailImg2" src="img/HiBaby.jpg">
                        <span class="detailNick">
                            testJy
                        </span>                                                
                    </div>
                    <span class="detailPoint">
                        12,500p
                    </span>
                    <div class="detailSm">
                        <p class="detailP">
                        동해물과 백두산이 마르고 닳도록동해물과 백두산이 마르고 닳도록동해물과 백두산이 마르고 닳도록동해물과 백두산이 마르고 닳도록동해물과 백두산이 마르고 닳도록
                        </p>
                    </div>
                </div>
                <div id="detailBtnMall">
                    <button id="frPlusBtn" onclick="#">친구 추가</button>
                    <button id="messageBtn" onclick="#">쪽지</button>
                </div>
                
                <!-- Modal body -->
               
                
                <!-- Modal bottom -->
            </div>
        </div>
        <!-- 유저검색 상세모달 end -->



        <!-- 친구 목록 모달 start-->
        <div id="frList" class="frListmodal">
            <!-- Modal content -->
            
            <div class="frListmodal-content">                
                <span id="frexitBtn" class="material-icons" onclick="frListHide()">clear</span>
                <!-- Modal body -->
                <span id="frTitle">친구 목록(4)</span>
                <div class="frListmodal-body">
                    <!-- forEach 돌리기 (클릭할시 친구삭제, 쪽지보내기 모달창 띄우기)-->
                    <div class="frListTable" onclick="choiceMenu()">
                        <!-- 계급, 사진, 닉네임, 상태메세지( 20글자이상 ...으로 ) 스크롤 기능 넣기-->
                        <div class="userListDiv1"><img class="userListImg" src="img/chall.png"></div>
                        <div class="userListDiv2"><img class="userListImg" src="img/HiBaby.jpg"></div>
                        <div class="userListDiv3">Test321</div>
                        <div class="userListDiv4">저의 상태메세지 입니다 말은점으로...</div>                            
                        <span id="loginChkCir" class="material-icons">child_care</span>
                    </div>
                </div>
                <!-- Modal bottom -->
            </div>
        </div>
        <!-- 친구 목록 모달 end -->


        <!-- 대화창 모달 Start 
        <div id="chatItem" class="chatModal">
            <span id="chatExitBtn" class="material-icons" onclick="detailModalHide()">clear</span>
            <div>
                
            
                
                
                Modal content 
                <div class="chatModal-content">                
                    
                    
                    asd
                    
                </div>
            </div>
        </div>
        대화창 모달 End -->

        <!-- 대화창 start -->
        <!-- 대화창 전체 div -->
        

            <div id="chatDiv">
                <div id="userInfoBox">
                    <img src="img/chall.png" id="chatUserImg">
                    <span id="chatUserNick">Test321</span>
                </div>
            
                <span id="chatExitBtn" class="material-icons" onclick="chatModalHide()">clear</span>
                <div id="chatDivheader">Drag Zone</div>
                
                <!-- 채팅 화면 div (itemBox)-->
                <div id="chatArea">

                    <!-- 상대 채팅 -->
                    <div id="youChatBox">
                        <div id="youChat">
                            <img src="/img/chall.png" class="youChatImg">
                            <span class="youChatNick">Test321</span>
                        </div>
                        <div class="youChatText">
                            동해물과 백두산이 마르고 닳도록 하느님이 
                        </div>
                        <span class="youChatDate">2020. 04. 29 12:35</span>
                    </div>

                    <!-- 내 채팅 -->
                    <div id="myChatBox">
                        <!-- (일단 이거뺌 (카카오톡처럼 하기 위해서 내껀 정보 안나타냄))
                        <div id="myChat">
                            <span class="myChatNick">Test321</span>
                            <img src="/img/chall.png" class="myChatImg">
                        </div>
                        -->
                        <div class="myChatText">
                            동해물과 백두산이 마르고 닳도록 하느님이 
                        </div>
                        <span class="myChatDate">2020. 04. 29 12:35</span>
                    </div>
                    
                </div>

                <div id="chatTextArea">
                    <form id="chatForm">
                        <textarea id="chatText" name="chatText" type="text"></textarea>
                    </form>
                    <span id="chatSend" class="material-icons" onclick="chatSend()">
                        send
                    </span>
                </div>
            </div>
            
       
        <!-- 대화창 end -->




    </div>

<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>

    //로그아웃
    function logOut() {
		if(confirm('로그아웃 하시겠습니까?')) {
			location.href="/user/logout"	
		}
	}
	
    // 화면 켜졌을때 유저 검색창 닫기
    searchBox.style.display = 'none'
    // ""   ""      유저 detail 모달 닫기
    detailUser.style.display = 'none'
	
    // 유저 검색창 열기
	function showUserList() {
		searchBox.style.display = 'flex'
	}

    // 닫기 눌렀을시 유저 검색창 닫기
    function searchBoxHide() {
        searchBox.style.display = 'none'
    }    
	
    // 유저 검색시 ajax 로 검색기능
	function searchUserList() {
		alert('아작스로 검색 만들기')
	}

	// 유저 리스트 뿌리기 ajax로 만들기
    function allUserBtn() {

    }


    // detail User Start


    // userDetailModal 열기
    function showDetailModal() {
        detailUser.style.display = 'flex'
    }
    // userDetailModal 닫기
    function detailModalHide() {
        detailUser.style.display = 'none'
    }



    // frList Start

    // frList show
    function showFrList() {
        frList.style.display = 'flex'
    }
    // frList hide
    function frListHide() {
        frList.style.display = 'none'
    }

    function choiceMenu() {
        alert('친구삭제, 쪽지 모달창 만들기')
    }

    // frList End





// 1.20 챗 개발 내용 아래부터 

// Make the DIV element draggable:
dragElement(document.getElementById("chatDiv"));

function dragElement(elmnt) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  if (document.getElementById(elmnt.id + "header")) {
    // if present, the header is where you move the DIV from:
    document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
  } else {
    // otherwise, move the DIV from anywhere inside the DIV:
    elmnt.onmousedown = dragMouseDown;
  }

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    // get the mouse cursor position at startup:
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    // call a function whenever the cursor moves:
    document.onmousemove = elementDrag;
  }

  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    // calculate the new cursor position:
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    // set the element's new position:
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    // stop moving when mouse button is released:
    document.onmouseup = null;
    document.onmousemove = null;
  }
}


// 채팅창 닫기
function chatModalHide() {
    chatDiv.style.display = 'none'
}

</script>
</body>

</html>